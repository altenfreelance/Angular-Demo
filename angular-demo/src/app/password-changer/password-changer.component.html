<form [formGroup]="form">
    <div class="form-group">
        <label for="old-pwd">Old Password:</label>
        <input formControlName="old" type="password" id="old-pwd" class="form-control">
        <div *ngIf="old.pending"> Checking password...</div>
        <div *ngIf="old.touched && old.invalid" class="alert alert-danger">
            <div *ngIf="old.errors.required">This field is required.</div>
            <div *ngIf="old.errors.invalidPassword">Hmm, that's not the right password.</div>
        </div>
    </div>
    <div class="form-group">
        <label for="new-pwd">New Password:</label>
        <input formControlName="new" type="password" id="new-pwd" class="form-control">
        <div *ngIf="new.touched && new.invalid" class="alert alert-danger">
            <div *ngIf="new.errors.required">This field is required.</div>
        </div>
    </div>
    <div class="form-group">
        <label for="confirm-pwd">Confirm New Password:</label>
        <input formControlName="confirm" type="password" id="confirm-pwd" class="form-control">
        <div *ngIf="confirm.touched && confirm.invalid" class="alert alert-danger">
            <div *ngIf="confirm.errors.required">This field is required.</div>
        </div>
        <div *ngIf="confirm.valid && form.errors?.passwordsDontMatch" class="alert alert-danger">
            <div>Your passwords must match.</div>
        </div>
    </div>
    <button [disabled]="form.invalid || form.pending" class="btn btn-primary">Change</button>
</form>
